\hypertarget{nvram_8c}{}\doxysection{/\+Users/cryptic/source/x8\+A4/\+Kernel/nvram.c File Reference}
\label{nvram_8c}\index{/Users/cryptic/source/x8A4/Kernel/nvram.c@{/Users/cryptic/source/x8A4/Kernel/nvram.c}}


This file is for all kernel nvram related code.  


{\ttfamily \#include $<$libkrw.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/\+Kernel/kernel.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/\+Kernel/offsets.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/\+Kernel/nvram.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/\+Kernel/osobject.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/\+Logger/logger.\+h$>$}\newline
{\ttfamily \#include $<$x8\+A4/x8\+A4.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint64\+\_\+t \mbox{\hyperlink{nvram_8c_a8b67c63da94f0ca7b608b6329f547d13}{get\+\_\+service\+\_\+nvram\+\_\+dict}} (io\+\_\+service\+\_\+t service)
\begin{DoxyCompactList}\small\item\em Gets a service\textquotesingle{}s nvram dict from it\textquotesingle{}s kobject. \end{DoxyCompactList}\item 
const char $\ast$ \mbox{\hyperlink{nvram_8c_a35cfc5335ac39c645e70a2cedd30983a}{find\+\_\+nvram\+\_\+key}} (const char $\ast$key, enum nvram\+\_\+key\+\_\+type type)
\begin{DoxyCompactList}\small\item\em Find key name in key name cache. \end{DoxyCompactList}\item 
const char $\ast$ \mbox{\hyperlink{nvram_8c_aeea0d8e8e076ae506dbcee00983e2e73}{get\+\_\+nvram\+\_\+key}} (const char $\ast$key, enum nvram\+\_\+key\+\_\+type type)
\begin{DoxyCompactList}\small\item\em Setup key name cache and get key name for type. \end{DoxyCompactList}\item 
uint8\+\_\+t $\ast$ \mbox{\hyperlink{nvram_8c_abfd5c0df080059298c1af7f6f973b93f}{get\+\_\+nvram\+\_\+entry\+\_\+bytes}} (uint64\+\_\+t nvram\+\_\+dict, const char $\ast$key, enum os\+\_\+type type, uint32\+\_\+t $\ast$out\+\_\+size)
\begin{DoxyCompactList}\small\item\em Get nvram entry bytes from matching key. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{nvram_8c_a2ae64280e90436254ee0d6a4bc01604b}{set\+\_\+nvram\+\_\+entry\+\_\+bytes}} (uint64\+\_\+t nvram\+\_\+dict, const char $\ast$key, uint8\+\_\+t $\ast$entry\+\_\+bytes, uint32\+\_\+t size, enum os\+\_\+type type)
\begin{DoxyCompactList}\small\item\em Set nvram entry bytes for matching key. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{nvram_8c_a673815f1f678cdb8a6da0fad9201e481}\label{nvram_8c_a673815f1f678cdb8a6da0fad9201e481}} 
struct nvram\+\_\+key $\ast$ {\bfseries nvram\+\_\+keys\+\_\+cached}
\item 
\mbox{\Hypertarget{nvram_8c_a2fbac66c32b400cab9e51fa5c051fa38}\label{nvram_8c_a2fbac66c32b400cab9e51fa5c051fa38}} 
int {\bfseries nvram\+\_\+keys\+\_\+count\+\_\+cached} = -\/1
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file is for all kernel nvram related code. 

\begin{DoxyAuthor}{Author}
Cryptiiiic 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2024-\/12-\/19
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2024 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{nvram_8c_a35cfc5335ac39c645e70a2cedd30983a}\label{nvram_8c_a35cfc5335ac39c645e70a2cedd30983a}} 
\index{nvram.c@{nvram.c}!find\_nvram\_key@{find\_nvram\_key}}
\index{find\_nvram\_key@{find\_nvram\_key}!nvram.c@{nvram.c}}
\doxysubsubsection{\texorpdfstring{find\_nvram\_key()}{find\_nvram\_key()}}
{\footnotesize\ttfamily const char $\ast$ find\+\_\+nvram\+\_\+key (\begin{DoxyParamCaption}\item[{const char $\ast$}]{key,  }\item[{enum nvram\+\_\+key\+\_\+type}]{type }\end{DoxyParamCaption})}



Find key name in key name cache. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em key} & \\
\hline
\mbox{\texttt{ in}}  & {\em type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Name of the key 
\end{DoxyReturn}
\mbox{\Hypertarget{nvram_8c_abfd5c0df080059298c1af7f6f973b93f}\label{nvram_8c_abfd5c0df080059298c1af7f6f973b93f}} 
\index{nvram.c@{nvram.c}!get\_nvram\_entry\_bytes@{get\_nvram\_entry\_bytes}}
\index{get\_nvram\_entry\_bytes@{get\_nvram\_entry\_bytes}!nvram.c@{nvram.c}}
\doxysubsubsection{\texorpdfstring{get\_nvram\_entry\_bytes()}{get\_nvram\_entry\_bytes()}}
{\footnotesize\ttfamily uint8\+\_\+t $\ast$ get\+\_\+nvram\+\_\+entry\+\_\+bytes (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{nvram\+\_\+dict,  }\item[{const char $\ast$}]{key,  }\item[{enum os\+\_\+type}]{type,  }\item[{uint32\+\_\+t $\ast$}]{out\+\_\+size }\end{DoxyParamCaption})}



Get nvram entry bytes from matching key. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em nvram\+\_\+dict} & \\
\hline
\mbox{\texttt{ in}}  & {\em key} & \\
\hline
\mbox{\texttt{ in}}  & {\em type} & \\
\hline
\mbox{\texttt{ out}}  & {\em out\+\_\+size} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the nvram entry bytes 
\end{DoxyReturn}
\mbox{\Hypertarget{nvram_8c_aeea0d8e8e076ae506dbcee00983e2e73}\label{nvram_8c_aeea0d8e8e076ae506dbcee00983e2e73}} 
\index{nvram.c@{nvram.c}!get\_nvram\_key@{get\_nvram\_key}}
\index{get\_nvram\_key@{get\_nvram\_key}!nvram.c@{nvram.c}}
\doxysubsubsection{\texorpdfstring{get\_nvram\_key()}{get\_nvram\_key()}}
{\footnotesize\ttfamily const char $\ast$ get\+\_\+nvram\+\_\+key (\begin{DoxyParamCaption}\item[{const char $\ast$}]{key,  }\item[{enum nvram\+\_\+key\+\_\+type}]{type }\end{DoxyParamCaption})}



Setup key name cache and get key name for type. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em key} & \\
\hline
\mbox{\texttt{ in}}  & {\em type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Name of the key 
\end{DoxyReturn}
\mbox{\Hypertarget{nvram_8c_a8b67c63da94f0ca7b608b6329f547d13}\label{nvram_8c_a8b67c63da94f0ca7b608b6329f547d13}} 
\index{nvram.c@{nvram.c}!get\_service\_nvram\_dict@{get\_service\_nvram\_dict}}
\index{get\_service\_nvram\_dict@{get\_service\_nvram\_dict}!nvram.c@{nvram.c}}
\doxysubsubsection{\texorpdfstring{get\_service\_nvram\_dict()}{get\_service\_nvram\_dict()}}
{\footnotesize\ttfamily uint64\+\_\+t get\+\_\+service\+\_\+nvram\+\_\+dict (\begin{DoxyParamCaption}\item[{io\+\_\+service\+\_\+t}]{service }\end{DoxyParamCaption})}



Gets a service\textquotesingle{}s nvram dict from it\textquotesingle{}s kobject. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em service} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Address of the nvram dict 
\end{DoxyReturn}
\mbox{\Hypertarget{nvram_8c_a2ae64280e90436254ee0d6a4bc01604b}\label{nvram_8c_a2ae64280e90436254ee0d6a4bc01604b}} 
\index{nvram.c@{nvram.c}!set\_nvram\_entry\_bytes@{set\_nvram\_entry\_bytes}}
\index{set\_nvram\_entry\_bytes@{set\_nvram\_entry\_bytes}!nvram.c@{nvram.c}}
\doxysubsubsection{\texorpdfstring{set\_nvram\_entry\_bytes()}{set\_nvram\_entry\_bytes()}}
{\footnotesize\ttfamily int set\+\_\+nvram\+\_\+entry\+\_\+bytes (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{nvram\+\_\+dict,  }\item[{const char $\ast$}]{key,  }\item[{uint8\+\_\+t $\ast$}]{entry\+\_\+bytes,  }\item[{uint32\+\_\+t}]{size,  }\item[{enum os\+\_\+type}]{type }\end{DoxyParamCaption})}



Set nvram entry bytes for matching key. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em nvram\+\_\+dict} & \\
\hline
\mbox{\texttt{ in}}  & {\em key} & \\
\hline
\mbox{\texttt{ in}}  & {\em entry\+\_\+bytes} & \\
\hline
\mbox{\texttt{ in}}  & {\em size} & \\
\hline
\mbox{\texttt{ in}}  & {\em type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the modified nvram entry bytes 
\end{DoxyReturn}
